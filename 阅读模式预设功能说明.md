# 🎨 图片阅读模式预设功能

> 为EhViewer的画廊阅读体验添加了人性化的预设模式选择，让用户可以快速切换适合不同内容类型的阅读配置。

## ✨ 功能特点

### 🎯 智能预设模式
- **漫画模式（右到左）**：适合日本漫画，从右页到左页翻页
- **漫画模式（左到右）**：适合欧美漫画，从左页到右页翻页  
- **长条模式**：适合韩国webtoon，从上到下滚动阅读
- **图书模式**：页面居中显示，适合阅读图书类内容
- **全屏模式**：图片原始大小显示，可自由缩放平移
- **自定义模式**：使用个人设置的布局、缩放和位置配置

### 🔧 智能检测和推荐
- 自动检测当前设置是否匹配某个预设模式
- 根据画廊标题和分类智能推荐适合的阅读模式
- 支持保存和加载个人自定义配置

### 🎨 用户体验优化
- 预设模式和具体设置项实时同步
- 修改具体设置时自动切换到"自定义模式"
- 提供详细的模式描述和使用建议

## 📍 功能位置

1. **主要设置入口**
   - 路径：`设置` → `阅读` → `阅读模式预设`
   - 位置：在屏幕方向设置之前，作为阅读设置的第一项

2. **相关设置项**
   - 阅读方向：从左到右/从右到左/从上到下
   - 页面缩放：原始尺寸/匹配宽度/匹配长度/匹配屏幕
   - 开页位置：左上角/右上角/左下角/右下角/中心

## 🛠️ 技术实现

### 核心组件
```
app/src/main/java/com/hippo/ehviewer/gallery/
├── GalleryReadingModeManager.java     # 阅读模式管理器
└── ...

app/src/main/java/com/hippo/ehviewer/ui/fragment/
├── ReadFragment.java                   # 阅读设置Fragment（已增强）
└── ...

app/src/main/res/
├── xml/read_settings.xml              # 阅读设置界面（已添加预设选项）
├── values/strings.xml                 # 英文字符串资源（已添加）
├── values-zh-rCN/strings.xml          # 中文字符串资源（已添加）
└── values/arrays.xml                  # 预设选项数组（已添加）
```

### 新增设置项
```java
// Settings.java 中的新方法
public static int getGalleryReadingModePreset()      // 获取当前预设模式
public static void putGalleryReadingModePreset(int) // 设置预设模式
```

### 预设配置常量
```java
// GalleryReadingModeManager.java 中的预设常量
public static final int PRESET_MANGA_RTL = 0;      // 漫画模式（右到左）
public static final int PRESET_MANGA_LTR = 1;      // 漫画模式（左到右）
public static final int PRESET_WEBTOON = 2;        // 长条模式
public static final int PRESET_BOOK_MODE = 3;      // 图书模式
public static final int PRESET_FULLSCREEN = 4;     // 全屏模式
public static final int PRESET_CUSTOM = 5;         // 自定义模式
```

## 📋 使用说明

### 基本使用流程
1. **进入设置**：打开EhViewer → 设置 → 阅读
2. **选择预设**：点击"阅读模式预设"，从6个预设中选择
3. **自动应用**：选择预设后自动应用对应的布局、缩放、位置设置
4. **个性化调整**：可以在预设基础上微调具体设置项

### 预设模式详解

#### 🎌 漫画模式（右到左）
- **布局**：从右到左翻页
- **缩放**：适应页面大小
- **起始位置**：右上角
- **适用**：日本漫画、同人志

#### 🎌 漫画模式（左到右）  
- **布局**：从左到右翻页
- **缩放**：适应页面大小
- **起始位置**：左上角  
- **适用**：欧美漫画、西方漫画

#### 📱 长条模式
- **布局**：从上到下滚动
- **缩放**：适应宽度
- **起始位置**：左上角
- **适用**：韩国webtoon、网络长条漫画

#### 📖 图书模式
- **布局**：从右到左翻页
- **缩放**：适应页面大小  
- **起始位置**：居中
- **适用**：图书、画集、艺术作品

#### 🖼️ 全屏模式
- **布局**：从右到左翻页
- **缩放**：原始大小
- **起始位置**：左上角
- **适用**：高清图片、需要查看细节的内容

#### ⚙️ 自定义模式
- **配置**：保持用户当前的个人设置
- **功能**：允许完全自定义的阅读体验
- **自动切换**：修改具体设置时自动切换到此模式

## 🧠 智能推荐功能

```java
// 根据画廊信息推荐模式
int recommendedMode = GalleryReadingModeManager.getRecommendedMode(
    galleryTitle, galleryCategory);
```

### 推荐规则
- **标题包含 "webtoon"、"manhwa"** → 长条模式
- **分类为 "manga"、"doujinshi"** → 漫画模式（右到左）  
- **分类为 "western"、标题包含 "comic"** → 漫画模式（左到右）
- **分类为 "image"、标题包含 "artbook"** → 图书模式
- **默认** → 漫画模式（右到左）

## 🔄 状态同步机制

### 设置联动
- 选择预设模式 → 自动更新具体设置项的显示值
- 修改具体设置 → 自动检测并切换到匹配的预设或自定义模式
- 实时同步，无需重启应用

### 持久化存储
- 预设选择保存在SharedPreferences中
- 具体设置项使用现有的Settings存储机制
- 支持应用重启后恢复上次选择的预设

## 🎉 技术优势

### ✅ 非侵入性设计
- 完全基于现有Settings API构建
- 不修改核心画廊渲染逻辑
- 向后兼容，随时可以禁用

### ✅ 智能适配
- 自动检测当前设置状态
- 智能推荐适合的阅读模式
- 支持用户习惯学习和适应

### ✅ 用户友好
- 直观的预设名称和描述
- 实时预览设置效果
- 详细的功能说明和使用提示

## 📝 总结

这个阅读模式预设功能为EhViewer带来了更加人性化的阅读体验：

1. **简化操作**：一键切换适合不同内容的阅读配置
2. **智能推荐**：根据内容类型自动推荐最佳阅读模式  
3. **个性化支持**：在预设基础上支持进一步的个人定制
4. **无缝集成**：完美融入现有设置系统，用户学习成本低

**最重要的是**：这个功能让用户在阅读不同类型的画廊时，能够快速获得最佳的视觉体验，真正实现了"一键优化，专业阅读"的目标！

---

*功能实现完成 - 版本: v2.0.0.1 | 开发时间: 2025-09-09*