# EhViewer 界面布局说明

## 概述

EhViewer 已重新设计界面布局，将导航按钮移至底部，顶部保留简洁的地址栏和搜索栏，提供更现代化的浏览体验。

## 界面结构

### 顶部区域 (56dp)
```
┌─────────────────────────────────────────┐
│  ┌─────────────────────────────────┐ ┌─┐ │
│  │  输入网址或搜索内容            │ │🔍│ │
│  └─────────────────────────────────┘ └─┘ │
└─────────────────────────────────────────┘
```
- **地址栏**: 占据大部分空间，支持URL输入和搜索词
- **搜索/访问按钮**: 点击执行搜索或访问URL
- **背景**: 使用圆角边框设计

### 主内容区域 (自适应)
```
┌─────────────────────────────────────────┐
│                                         │
│              WebView内容                 │
│                                         │
│              (可滚动)                    │
│                                         │
└─────────────────────────────────────────┘
```
- **WebView**: 显示网页内容
- **下拉刷新**: 支持下拉刷新功能
- **进度条**: 显示加载进度

### 底部导航栏 (56dp)
```
┌─────────────────────────────────────────┐
│ 🏠 │ 📚 │ ⭐ │ 🗂️ │ ⚙️ │
└─────────────────────────────────────────┘
```
- **主页**: 返回配置的默认首页
- **历史**: 浏览历史记录
- **书签**: 书签管理
- **多窗口**: 多标签页管理
- **设置**: 核心功能设置

## 功能特性

### 智能搜索/访问
- **自动识别**: 输入URL直接访问，输入关键词自动搜索
- **搜索引擎**: 支持多种搜索引擎，可远程配置
- **国家适配**: 中国用户默认百度，其他用户默认Google

### 底部导航
- **均衡布局**: 6个主要功能按钮平均分布
- **视觉反馈**: 点击时有涟漪效果
- **状态指示**: 按钮颜色随主题变化

### 响应式设计
- **自适应高度**: 内容区域自动填充剩余空间
- **分割线**: 顶部区域有细微分割线
- **阴影效果**: 底部导航栏有阴影提升视觉层次

## 技术实现

### 布局文件结构
```xml
<LinearLayout orientation="vertical">
    <!-- 顶部地址栏区域 -->
    <LinearLayout>
        <EditText />  <!-- 地址栏 -->
        <ImageButton />  <!-- 搜索按钮 -->
    </LinearLayout>

    <!-- 主内容区域 -->
    <SwipeRefreshLayout layout_weight="1">
        <WebView />
    </SwipeRefreshLayout>

    <!-- 底部导航栏 -->
    <LinearLayout>
        <ImageButton />  <!-- 后退 -->
        <ImageButton />  <!-- 前进 -->
        <ImageButton />  <!-- 刷新 -->
        <ImageButton />  <!-- 主页 -->
        <ImageButton />  <!-- 书签 -->
        <ImageButton />  <!-- 菜单 -->
    </LinearLayout>
</LinearLayout>
```

### 样式配置
- **地址栏背景**: `edit_text_background.xml` (圆角边框)
- **按钮样式**: 使用系统默认的 `selectableItemBackgroundBorderless`
- **颜色主题**: 支持浅色/深色主题自动切换

### 交互逻辑
```java
// 地址栏回车键
mAddressBar.setOnEditorActionListener((v, actionId, event) -> {
    processInputAndLoad();
    return true;
});

// 搜索/访问按钮
mGoButton.setOnClickListener(v -> {
    processInputAndLoad();
    hideKeyboard();
});
```

## 用户体验优化

### 便捷操作
- **一键搜索**: 点击搜索按钮即可执行
- **键盘隐藏**: 点击搜索按钮自动隐藏键盘
- **智能填充**: 地址栏支持自动填充

### 视觉设计
- **简洁顶部**: 去除冗余按钮，专注内容输入
- **底部操作**: 符合现代App的导航习惯
- **一致性**: 按钮图标和功能保持一致

### 性能优化
- **内存管理**: 合理使用layout_weight避免过度绘制
- **响应速度**: 按钮点击立即响应
- **资源复用**: 使用系统drawable资源

## 兼容性

### Android版本支持
- **最低版本**: API 21 (Android 5.0)
- **推荐版本**: API 24+ (更好的WebView性能)

### 屏幕适配
- **手机**: 优化单手操作
- **平板**: 支持横屏和大屏幕
- **可折叠**: 适配可折叠设备

### 主题支持
- **浅色主题**: 白色背景，深色文字
- **深色主题**: 深色背景，浅色文字
- **系统跟随**: 自动跟随系统主题设置

## 扩展性

### 自定义功能
- **按钮数量**: 可根据需要调整底部按钮数量
- **功能扩展**: 可在菜单中添加更多功能
- **主题定制**: 支持自定义颜色和样式

### 配置化
- **远程配置**: 首页URL可远程配置
- **搜索引擎**: 支持多种搜索引擎配置
- **快捷选项**: 菜单中的快捷访问选项

## 使用说明

### 基本操作
1. **输入网址**: 在顶部地址栏输入网址，按回车或点击搜索按钮
2. **搜索内容**: 输入关键词自动使用配置的搜索引擎
3. **页面导航**: 使用底部5个功能按钮进行操作
4. **返回首页**: 点击主页按钮返回配置的默认首页

### 核心功能
1. **历史记录**: 点击历史按钮查看浏览历史，可跳转和清除历史，支持详情查看
2. **书签管理**: 点击书签按钮管理收藏的网页，分页显示30项/页，支持下拉加载更多
3. **多窗口管理**: 点击多窗口按钮管理多个标签页，可新建、切换、关闭标签页
4. **设置中心**: 点击设置按钮访问核心功能设置
5. **下拉刷新**: 在网页上向下滑动可刷新页面
6. **书签统计**: 查看书签使用统计数据

### 多窗口功能
- **新建标签页**: 创建新的浏览器标签页
- **标签页切换**: 在不同标签页间快速切换
- **标签页关闭**: 关闭不需要的标签页
- **标签页详情**: 查看所有标签页的详细信息
- **自动保存**: 标签页信息自动保存和恢复

### 设置功能
#### 下载管理
- 文件下载记录
- 下载设置配置

#### 书签管理
- 书签分类整理
- 书签导入导出

#### 历史记录
- 浏览历史查看
- 历史记录清理

#### 搜索引擎
- 搜索引擎切换
- 搜索建议设置

#### 首页设置
- 自定义默认首页
- 快捷首页选项

#### 隐私设置
- 清除浏览数据
- Cookie管理
- 广告拦截设置

#### 性能设置
- 缓存管理
- 图像加载设置
- JavaScript设置

## 故障排除

### 常见问题

#### 1. 按钮点击无响应
**原因**: 布局文件未正确加载
**解决**: 检查布局文件语法，重启应用

#### 2. 地址栏样式异常
**原因**: drawable资源未找到
**解决**: 确认 `edit_text_background.xml` 文件存在

#### 3. 底部导航栏显示不全
**原因**: 屏幕高度不足
**解决**: 检查布局权重设置

#### 4. 主题颜色不生效
**原因**: 系统主题设置问题
**解决**: 重启应用或检查主题配置

## 更新日志

### v2.1.0 (底部导航重构)
- ✅ **精简导航**: 移除前进、后退、刷新按钮
- ✅ **核心功能**: 保留主页、历史、书签、多窗口、设置
- ✅ **设置重组**: 重新梳理设置菜单，专注核心功能
- ✅ **用户体验**: 优化底部导航栏的交互体验
- ✅ **代码清理**: 移除无效功能代码，保持代码简洁
- ✅ **功能实现**: 实现历史记录、书签管理、多窗口管理功能
- ✅ **数据持久化**: 使用SQLite数据库持久化书签数据
- ✅ **智能交互**: 集成SearchConfigManager提供智能搜索
- ✅ **分页加载**: 书签支持30项/页分页显示
- ✅ **多标签页**: 实现完整的多窗口标签页管理
- ✅ **统计功能**: 添加书签使用统计和访问数据
- ✅ **调试优化**: 增加历史记录调试日志和错误处理

### v2.0.0 (界面重构)
- ✅ **顶部简化**: 移除顶部导航栏，保留地址栏
- ✅ **底部导航**: 将功能按钮移至底部
- ✅ **搜索按钮**: 新增搜索/访问按钮
- ✅ **响应式布局**: 适配不同屏幕尺寸
- ✅ **主题支持**: 支持浅色/深色主题
- ✅ **性能优化**: 优化布局渲染性能

### v1.0.0 (基础版本)
- ✅ 传统顶部导航栏布局
- ✅ 基础浏览功能
- ✅ 书签和历史功能

## 未来计划

### 短期优化
- [ ] 添加手势导航支持
- [ ] 优化夜间模式体验
- [ ] 添加语音搜索功能

### 长期规划
- [ ] 支持自定义底部按钮布局
- [ ] 添加快捷手势操作
- [ ] 集成AI搜索建议
- [ ] 支持多标签页管理
